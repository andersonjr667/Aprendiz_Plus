!function(t){const e=()=>t.__API_BASE__||"/api";async function n(n,o={}){const r=e(),a=n.startsWith("http")?n:r+(n.startsWith("/")?n:"/"+n);o.headers=o.headers||{},!o.body||o.body instanceof FormData||o.headers["Content-Type"]||(o.headers["Content-Type"]="application/json","string"!=typeof o.body&&(o.body=JSON.stringify(o.body)));const s=t.Auth&&t.Auth.getToken?t.Auth.getToken():null;s&&(o.headers.Authorization="Bearer "+s),o.credentials||(o.credentials="include");const i=await fetch(a,o);let c=null;try{c=await i.json()}catch(t){c=null}if(!i.ok){const t=new Error(c&&c.error?c.error:"HTTP "+i.status);throw t.response=i,t.payload=c,t}return c}t.apiFetch=n,t.API={fetch:n,base:e}}(window);