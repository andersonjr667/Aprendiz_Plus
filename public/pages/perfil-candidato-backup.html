<!doctype html>
<html lang="pt-br">
<head>
    <link rel="icon" type="image/png" href="/public/images/logo.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Meu Perfil | Aprendiz+</title>
  <link rel="stylesheet" href="/public/css/main.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <script src="/public/js/auth.js" defer></script>
  <script src="/public/js/api.js" defer></script>
  <style>
    .profile-header {
      background: linear-gradient(135deg, var(--brand-green) 0%, var(--brand-green-dark) 100%);
      color: white;
      padding: var(--spacing-xxl) 0;
      margin-bottom: var(--spacing-xl);
    }

    .profile-avatar {
      width: 120px;
      height: 120px;
      border-radius: var(--border-radius-full);
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      color: var(--brand-green);
      margin: 0 auto var(--spacing-lg);
      border: 4px solid rgba(255, 255, 255, 0.2);
    }

    .edit-mode .form-group {
      margin-bottom: var(--spacing-lg);
    }

    .edit-toggle {
      position: absolute;
      top: var(--spacing-lg);
      right: var(--spacing-lg);
    }

    .skill-tag {
      background: var(--brand-green);
      color: white;
      padding: var(--spacing-xs) var(--spacing-sm);
      border-radius: var(--border-radius-full);
      font-size: var(--font-size-sm);
      margin: var(--spacing-xs);
      display: inline-block;
    }

    .application-status {
      padding: var(--spacing-xs) var(--spacing-sm);
      border-radius: var(--border-radius);
      font-size: var(--font-size-xs);
      font-weight: var(--font-weight-medium);
      text-transform: uppercase;
    }

    .status-pending {
      background: var(--warning-light);
      color: var(--warning);
    }

    .status-accepted {
      background: var(--success-light);
      color: var(--success);
    }

    .status-rejected {
      background: var(--error-light);
      color: var(--error);
    }

    @media (max-width: 1024px) {
      .profile-grid {
        grid-template-columns: 1fr !important;
      }
    }
  </style>
    <!-- AI Assistant -->
    <link rel="stylesheet" href="/public/css/ai-assistant.css">
</head>
<body class="page-container">
  <header class="nav-header">
    <nav class="top-nav">
      <div class="nav-logo"><a href="/">Aprendiz+</a></div>
      <div class="nav-links">
        <a href="/">In√≠cio</a>
        <a href="/vagas">Vagas</a>
        <a href="/noticias">Not√≠cias</a>
        <a href="/perfil-candidato" class="active">Meu Perfil</a>
        <button onclick="logout()" class="btn btn-outline">Sair</button>
      </div>
    </nav>
  </header>

  <main class="main-content">
    <!-- Profile Header -->
    <section class="profile-header">
      <div class="container text-center">
        <div class="profile-avatar" id="profileAvatar">üë§</div>
        <h1 id="profileName">Carregando...</h1>
        <p id="profileTitle">Candidato</p>
      </div>
    </section>

    <!-- Profile Content -->
    <section class="container">
      <div class="profile-grid" style="display: grid; grid-template-columns: 2fr 1fr; gap: var(--spacing-xl);">
        <!-- Main Profile Card -->
        <div>
          <div class="card" style="position: relative;">
            <button id="editToggle" class="btn btn-outline edit-toggle">
              <span id="editText">Editar</span>
            </button>
            
            <div class="card-header">
              <h2 class="card-title">Informa√ß√µes Pessoais</h2>
            </div>

            <div class="card-body">
              <div id="messageContainer" class="message-container" style="display: none;">
                <div id="messageText"></div>
              </div>

              <!-- View Mode -->
              <div id="viewMode">
                <div class="personal-info-grid">
                  <div class="info-card">
                    <div class="info-header">
                      <div class="info-icon"><i class="fas fa-user"></i></div>
                      <span class="info-label">Nome Completo</span>
                    </div>
                    <p id="displayName" class="info-value">-</p>
                  </div>
                  
                  <div class="info-card">
                    <div class="info-header">
                      <div class="info-icon"><i class="fas fa-envelope"></i></div>
                      <span class="info-label">E-mail</span>
                    </div>
                    <p id="displayEmail" class="info-value">-</p>
                  </div>
                  
                  <div class="info-card">
                    <div class="info-header">
                      <div class="info-icon"><i class="fas fa-id-card"></i></div>
                      <span class="info-label">CPF</span>
                    </div>
                    <p id="displayCpf" class="info-value">-</p>
                  </div>
                  
                  <div class="info-card">
                    <div class="info-header">
                      <div class="info-icon"><i class="fas fa-phone"></i></div>
                      <span class="info-label">Telefone</span>
                    </div>
                    <p id="displayPhone" class="info-value">-</p>
                  </div>
                  
                  <div class="info-card bio-card">
                    <div class="info-header">
                      <div class="info-icon"><i class="fas fa-user-edit"></i></div>
                      <span class="info-label">Sobre mim</span>
                    </div>
                    <p id="displayBio" class="info-bio">Nenhuma descri√ß√£o adicionada</p>
                  </div>
                  
                  <div class="info-card skills-card">
                    <div class="info-header">
                      <div class="info-icon"><i class="fas fa-rocket"></i></div>
                      <span class="info-label">Habilidades</span>
                    </div>
                    <div id="displaySkills" class="skills-container">
                      <span class="text-gray-500">Nenhuma habilidade adicionada</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Edit Mode -->
                                      <!-- Edit Mode -->
                        <div id="editMode" style="display: none;">
                            <form id="profileForm">
                                <div class="form-group">
                                    <label for="editPhoto">Foto de Perfil</label>
                                    <input type="file" id="editPhoto" class="form-control" accept="image/*">
                                    <small class="form-text text-gray-500">Formatos aceitos: JPG, PNG, GIF (m√°x. 5MB)</small>
                                </div>

                                <div class="form-group">
                                    <label for="editName">Nome Completo *</label>
                                    <input type="text" id="editName" class="form-control" required>
                                </div>

                                <div class="form-group">
                                    <label for="editEmail">E-mail *</label>
                                    <input type="email" id="editEmail" class="form-control" required readonly>
                                    <small class="form-text text-gray-500">Entre em contato conosco para alterar o e-mail</small>
                                </div>

                                <div class="form-group">
                                    <label for="editCpf">CPF</label>
                                    <input type="text" id="editCpf" class="form-control" placeholder="000.000.000-00">
                                </div>

                                <div class="form-group">
                                    <label for="editPhone">Telefone</label>
                                    <input type="text" id="editPhone" class="form-control" placeholder="(00) 00000-0000">
                                </div>

                                <div class="form-group">
                                    <label for="editBio">Sobre Voc√™</label>
                                    <textarea id="editBio" class="form-control" rows="4" placeholder="Conte um pouco sobre voc√™, suas experi√™ncias e objetivos profissionais..."></textarea>
                                </div>

                                <div class="form-group">
                                    <label for="editSkills">Habilidades</label>
                                    <input type="text" id="editSkills" class="form-control" placeholder="JavaScript, React, Node.js, etc. (separadas por v√≠rgula)">
                                </div>

                                <div class="flex gap-md">
                                    <button type="submit" class="btn btn-primary">Salvar Altera√ß√µes</button>
                                    <button type="button" id="cancelEdit" class="btn btn-outline-secondary" onclick="toggleEditMode()">Cancelar</button>
                                </div>
                            </form>
                        </div>
            </div>
          </div>

          <!-- Resume Section -->
          <div class="card" style="margin-top: var(--spacing-xl);">
            <div class="card-header">
              <h3 class="card-title">Curr√≠culo</h3>
            </div>
            <div class="card-body">
              <div id="resumeSection">
                <div class="resume-container">
                  <div class="resume-status" id="resumeStatus">
                    <div class="resume-upload-area" id="resumeUploadArea">
                      <div class="upload-icon">
                        <i class="fas fa-file-upload"></i>
                      </div>
                      <h4>Adicione seu curr√≠culo</h4>
                      <p>Fa√ßa upload do seu curr√≠culo em formato PDF, DOC ou DOCX</p>
                      <input type="file" id="resumeInput" accept=".pdf,.doc,.docx" style="display: none;">
                      <button type="button" class="btn btn-primary" onclick="document.getElementById('resumeInput').click();">
                        <i class="fas fa-upload"></i> Selecionar Arquivo
                      </button>
                      <small class="text-gray-500" style="display: block; margin-top: var(--spacing-sm);">
                        Tamanho m√°ximo: 5MB
                      </small>
                    </div>
                    
                    <div class="resume-actions" id="resumeActions" style="display: none;">
                      <div class="resume-info">
                        <div class="resume-file-icon">
                          <i class="fas fa-file-pdf"></i>
                        </div>
                        <div class="resume-details">
                          <h5 id="resumeFileName">curr√≠culo.pdf</h5>
                          <span id="resumeFileDate" class="text-gray-500">Enviado em --</span>
                        </div>
                      </div>
                      <div class="resume-buttons">
                        <button type="button" class="btn btn-outline" onclick="downloadResume()">
                          <i class="fas fa-download"></i> Baixar
                        </button>
                        <button type="button" class="btn btn-outline-secondary" onclick="replaceResume()">
                          <i class="fas fa-sync-alt"></i> Substituir
                        </button>
                        <button type="button" class="btn btn-outline-danger" onclick="deleteResume()">
                          <i class="fas fa-trash"></i> Remover
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Applications Card -->
          <div class="card" style="margin-top: var(--spacing-xl);">
            <div class="card-header">
              <h3 class="card-title">Minhas Candidaturas</h3>
            </div>
            <div class="card-body">
              <div id="applications">
                <div class="text-center p-xl">
                  <div class="loading-spinner mx-auto"></div>
                  <p>Carregando candidaturas...</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Sidebar -->
        <aside>
          <!-- Quick Actions -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">A√ß√µes R√°pidas</h3>
            </div>
            <div class="card-body">
              <div class="flex flex-col gap-sm">
                <a href="/vagas" class="btn btn-primary btn-block">Buscar Vagas</a>
                <a href="/noticias" class="btn btn-outline btn-block">Ver Not√≠cias</a>
                <button id="quickResumeBtn" onclick="quickResumeAction()" class="btn btn-outline-secondary btn-block">
                  <i class="fas fa-file-pdf"></i> <span id="quickResumeText">Adicionar Curr√≠culo</span>
                </button>
              </div>
            </div>
          </div>

          <!-- Recommendations -->
          <div class="card" style="margin-top: var(--spacing-lg);">
            <div class="card-header">
              <h3 class="card-title">Vagas Recomendadas</h3>
            </div>
            <div class="card-body">
              <div id="recommendations">
                <div class="text-center p-lg">
                  <div class="loading-spinner mx-auto"></div>
                  <p>Carregando...</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Profile Stats -->
          <div class="card" style="margin-top: var(--spacing-lg);">
            <div class="card-header">
              <h3 class="card-title">Estat√≠sticas</h3>
            </div>
            <div class="card-body">
              <div class="flex flex-col gap-md">
                <div class="flex justify-between">
                  <span>Candidaturas</span>
                  <strong id="statsApplications">0</strong>
                </div>
                <div class="flex justify-between">
                  <span>Perfil visualizado</span>
                  <strong id="statsViews">0</strong>
                </div>
                <div class="flex justify-between">
                  <span>Completude do perfil</span>
                  <strong id="statsCompletion">0%</strong>
                </div>
              </div>
            </div>
          </div>
        </aside>
      </div>
    </section>
  </main>

  <footer class="main-footer">
    <div class="footer-content">
      <div class="footer-brand">
        <h3>Aprendiz+</h3>
        <p>Conectando jovens talentos ao mercado de trabalho</p>
      </div>
      <div class="footer-links">
        <h4>Links √öteis</h4>
        <a href="/">In√≠cio</a>
        <a href="/contato">Contato</a>
        <a href="/termos">Termos de Uso</a>
        <a href="/privacidade">Pol√≠tica de Privacidade</a>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 Aprendiz+. Todos os direitos reservados.</p>
    </div>
  </footer>

  <script src="/public/js/perfil-candidato.js" defer></script>
    <!-- AI Assistant -->
    <script src="/public/js/ai-assistant.js"></script>
</body>
</html>