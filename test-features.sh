#!/bin/bash

# Script para testar todas as funcionalidades do sistema

echo "======================================"
echo "APRENDIZ PLUS - TESTE DE FUNCIONALIDADES"
echo "======================================"
echo ""

# Verificar se o servidor est√° rodando
if ! curl -s http://localhost:3000 > /dev/null; then
    echo "‚ùå Servidor n√£o est√° rodando na porta 3000"
    echo "Execute: npm start"
    exit 1
fi

echo "‚úÖ Servidor est√° rodando"
echo ""

echo "======================================"
echo "FUNCIONALIDADES IMPLEMENTADAS:"
echo "======================================"
echo ""

echo "‚úÖ 1. CHAT E MENSAGENS"
echo "   - Chat entre candidato e empresa"
echo "   - Hist√≥rico de conversas"
echo "   - Indicadores de leitura (‚úì‚úì)"
echo "   - Anexos em mensagens"
echo "   - Notifica√ß√µes de novas mensagens"
echo "   API: GET/POST /api/chats, GET/POST /api/chats/:id/messages"
echo ""

echo "‚úÖ 2. NOTIFICA√á√ïES"
echo "   - Sistema completo de notifica√ß√µes"
echo "   - Badge de contagem n√£o lidas"
echo "   - Marcar como lida"
echo "   API: GET /api/notifications, PUT /api/notifications/:id/read"
echo ""

echo "‚úÖ 3. DASHBOARDS"
echo "   - Dashboard do Candidato (estat√≠sticas completas)"
echo "   - Dashboard da Empresa (visualiza√ß√µes, candidaturas)"
echo "   API: GET /api/dashboard/candidate, GET /api/dashboard/company"
echo ""

echo "‚úÖ 4. BUSCA POR LOCALIZA√á√ÉO"
echo "   - Busca de vagas por proximidade"
echo "   - Mapa interativo com Leaflet"
echo "   - Geocodifica√ß√£o de endere√ßos"
echo "   - Clusters de vagas"
echo "   API: GET /api/geo/jobs/nearby, GET /api/geo/jobs/clusters"
echo ""

echo "‚úÖ 5. SISTEMA DE VERIFICA√á√ÉO"
echo "   - Verifica√ß√£o de e-mail (via link)"
echo "   - Valida√ß√£o de CNPJ para empresas"
echo "   - Verifica√ß√£o de documentos"
echo "   - Badge de perfil verificado ‚úì"
echo "   API: POST /api/verification/email/request, POST /api/verification/document"
echo ""

echo "‚úÖ 6. SISTEMA ANTI-SPAM"
echo "   - Rate limiting por a√ß√£o"
echo "   - An√°lise de conte√∫do suspeito"
echo "   - Blacklist de palavras"
echo "   - Bloqueio autom√°tico"
echo "   - Relat√≥rios para admin"
echo ""

echo "‚úÖ 7. GAMIFICA√á√ÉO COMPLETA"
echo "   - Sistema de pontos (14 tipos de a√ß√µes)"
echo "   - 6 n√≠veis de perfil"
echo "   - 8 badges/conquistas"
echo "   - Ranking de candidatos"
echo "   - Recompensas por completar perfil"
echo "   API: GET /api/gamification/stats, GET /api/gamification/leaderboard"
echo ""

echo "‚úÖ 8. SISTEMA DE FAVORITOS"
echo "   - Salvar vagas favoritas"
echo "   - Marcar candidatos favoritos"
echo "   - Listas personalizadas"
echo "   - Compartilhar favoritos"
echo "   API: GET/POST /api/favorites, GET/POST /api/favorite-lists"
echo ""

echo "‚úÖ 9. SISTEMA DE AVALIA√á√ïES"
echo "   - Candidatos avaliam empresas"
echo "   - Empresas avaliam candidatos"
echo "   - Rating com estrelas (1-5)"
echo "   - Coment√°rios de experi√™ncia"
echo "   - Modera√ß√£o de avalia√ß√µes (admin)"
echo "   - Den√∫ncias de avalia√ß√µes"
echo "   API: GET/POST /api/reviews, PUT /api/reviews/:id/moderate"
echo ""

echo "======================================"
echo "P√ÅGINAS HTML CRIADAS:"
echo "======================================"
echo ""
echo "üìÑ /public/pages/chat.html - Sistema de chat"
echo "üìÑ /public/pages/dashboard-candidato.html - Dashboard candidato"
echo "üìÑ /public/pages/favoritos.html - Sistema de favoritos"
echo "üìÑ /public/pages/mapa-vagas.html - Mapa de vagas"
echo ""

echo "======================================"
echo "MODELOS CRIADOS:"
echo "======================================"
echo ""
echo "üì¶ Chat.js - Gerenciamento de conversas"
echo "üì¶ Message.js - Mensagens com leitura"
echo "üì¶ Notification.js - Sistema de notifica√ß√µes"
echo "üì¶ Favorite.js - Favoritos e listas"
echo "üì¶ Review.js - Avalia√ß√µes e ratings"
echo "üì¶ Gamification.js - Pontos e conquistas"
echo "üì¶ Verification.js - Verifica√ß√µes"
echo "üì¶ AntiSpam.js - Prote√ß√£o anti-spam"
echo "üì¶ GeoLocation.js - Busca geolocalizada"
echo ""

echo "======================================"
echo "ARQUIVOS DE SUPORTE:"
echo "======================================"
echo ""
echo "üé® /public/css/features.css - Estilos das funcionalidades"
echo "‚ö° /public/js/features.js - Scripts das funcionalidades"
echo ""

echo "======================================"
echo "COMO TESTAR:"
echo "======================================"
echo ""
echo "1. Acesse: http://localhost:3000"
echo "2. Registre um candidato e uma empresa"
echo "3. Teste as funcionalidades:"
echo "   - /chat - Sistema de mensagens"
echo "   - /dashboard-candidato - Dashboard do candidato"
echo "   - /favoritos - Sistema de favoritos"
echo "   - /mapa-vagas - Mapa de vagas pr√≥ximas"
echo ""

echo "======================================"
echo "ENDPOINTS DA API:"
echo "======================================"
echo ""
echo "Chat:"
echo "  GET    /api/chats"
echo "  POST   /api/chats"
echo "  GET    /api/chats/:id/messages"
echo "  POST   /api/chats/:id/messages"
echo ""
echo "Notifica√ß√µes:"
echo "  GET    /api/notifications"
echo "  PUT    /api/notifications/:id/read"
echo "  GET    /api/notifications/unread-count"
echo ""
echo "Favoritos:"
echo "  GET    /api/favorites"
echo "  POST   /api/favorites"
echo "  DELETE /api/favorites/:id"
echo ""
echo "Avalia√ß√µes:"
echo "  GET    /api/reviews/:targetId"
echo "  POST   /api/reviews"
echo "  POST   /api/reviews/:id/report"
echo ""
echo "Gamifica√ß√£o:"
echo "  GET    /api/gamification/stats"
echo "  GET    /api/gamification/leaderboard"
echo ""
echo "Verifica√ß√£o:"
echo "  POST   /api/verification/email/request"
echo "  GET    /api/verification/email/:token"
echo "  POST   /api/verification/document"
echo ""
echo "Geolocaliza√ß√£o:"
echo "  GET    /api/geo/jobs/nearby"
echo "  GET    /api/geo/jobs/clusters"
echo "  POST   /api/geo/geocode"
echo ""
echo "Dashboards:"
echo "  GET    /api/dashboard/candidate"
echo "  GET    /api/dashboard/company"
echo ""

echo "======================================"
echo "‚úÖ TODAS AS FUNCIONALIDADES EST√ÉO IMPLEMENTADAS!"
echo "======================================"
